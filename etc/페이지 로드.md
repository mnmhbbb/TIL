# 문서 불러오기 페이지 로드에 대한 내용 정리
- 브라우저는 html을 읽으면서 DOM 생성을 하다가 `<script>` 태그를 만나면, 파싱을 잠시 멈추고 `<script>`를 실행함
- 필요한 js 파일을 다운 받아서(fetching) 실행하다가(executing) 작업이 끝나면, 다시 진행하던 DOM 생성 작업을 함
- 따라서 아직 불러와지지 않은 html 태그에 대한 자바스크립트 동작이 불가능하다.(html이 다 파싱되기 전에 js이 실행되므로 DOM요소에 접근할 수 없어서)
- 또한, 용량이 큰 스크립트가 상단에 있는 경우, 시간이 오래 걸리기 때문에 모두 다운받고 실행할 때까지 하단 스크립트를 볼 수 없고, 사용자들은 빈페이지를 보면서 기다려야만 한다.
&nbsp;
&nbsp;
## 1. 페이지 로드 관련 이벤트 4
### 1. DOMContentLoaded
- 브라우저가 html을 모두 읽어서 DOM Tree 구성이 완료되었을 때 발생함
- 이미지나 스타일시트 등의 리소스를 기다리지 않음
### 2. load
- DOM 구성은 물론이고, 이미지 등의 모든 리소스가 다운로드되었을 때 발생함
- 따라서 데이터가 크고 많으면 많은 시간이 소요됨
### 3. unload
- 리소스들이 언로드됐을 때 발생함
- 최종적으로 사용자가 사이트를 떠날 때, 사용자 분석 정보를 전송하고자 할 때 사용함
### 4. beforeunload
- 언로드 되기 전에 발생함
- 사용자가 페이지를 떠나려 할 때, 정말 페이지를 떠날 건지 확인시켜줄 때 사용함  

## 2. script 태그의 속성 2 
> 실무에선 `defer`를 DOM 전체가 필요한 스크립트나 실행 순서가 중요한 경우에 적용합니다.   
> `async`는 방문자 수 카운터나 광고 관련 스크립트같이 독립적인 스크립트에 혹은 실행 순서가 중요하지 않은 경우에 적용합니다.
### 1. defer
- 브라우저가 html 파싱을 하다가 defer 속성을 만나면 파싱을 계속 진행하면서 백그라운드에서 스크립트를 다운로드 받아놓음
- DOM 생성이 끝난 후에, 다운로드 했던 스크립트를 실행함
- `DOMContentLoaded` 이벤트 발생 전에 실행됨
- 일반 자바스크립트와 마찬가지로 html에 추가된 순으로 실행됨
- (따라서 나의 경우 해당 속성을 주로 사용한다.)
### 2. async
- `defer`속성과 마찬가지로 백그라운드에서 스크립트를 다운로드함
- 다만, 스크립트 다운로드가 끝나면 즉시 실행함
- 스크립트 다운 시간을 절약할 수 있지만, html이 파싱되기 전에 실행될 수 있다는 단점.
- 페이지에 `async` 스크립트가 여러 개 있다면, 실행 순서는 (다운로드가 끝난 순서로)제각각이 됨
- `async`는 이처럼 페이지와 완전히 독립적으로 동작함
&nbsp;  
&nbsp;  
###### 참조:  
모던 자바스크립트 - 문서와 리소스 로딩 <https://ko.javascript.info/onload-ondomcontentloaded>
