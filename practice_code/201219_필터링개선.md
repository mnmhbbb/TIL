# 201219 filter 코드를 개선하기

<img src="/img/201219.png" width="400px" height="300px" title="카테고리 필터" alt="구현된 모습"></img>
드림코딩 아카데미 강의를 수강하고 만든 미니쇼핑웹페이지이다.  
버튼을 클릭하면 카테고리별로 아이템이 분류된다.

## 1. filter 메서드를 사용하던 코드를, forEach를 이용하여 classList add/remove 하려고 시도

#### 이전의 코드

```javascript
function onButtonClick(event, items) {
  const dataset = event.target.dataset;
  const key = dataset.key;
  const value = dataset.value;

  if (key == null || value == null) {
    return;
  }
  displayItems(items.filter((item) => item[key] === value));
}
```

버튼을 클릭할 때마다 `displayItems()`를 통해 아이템 목록이 생기고 사라지는 부분이 비효율적이라서, 간단하게 classList를 이용하여 해당하는 아이템만 보이게 구현하는 방식으로 개선하려고 한다.

#### 현재의 코드

```javascript
function onButtonClick(event, items) {
  const dataset = event.target.dataset;
  const key = dataset.key;
  const value = dataset.value;

  if (key == null || value == null) {
    return;
  }
  //   displayItems(items.filter((item) => item[key] === value));

  updateItems(items, key, value);
}

function updateItems(items, key, value) {
  let list = document.querySelectorAll(".item");
  for (let i = 0; i < list.length; i++) {
    items.forEach((item) => {
      if (item[key] === value) {
        list[i].classList.remove("invisible");
      } else {
        list[i].classList.add("invisible");
      }
    });
  }
}
```

items와 클릭한 key, value를 받아와서 조건을 충족하는 아이템만 보이게 실행하려고 했으나, json에서 받아온 데이터 자체에 classList 추가를 하려고 한 점이 문제라고 깨닫고, 아이템들을 querySelectorAll로 한 번에 받아온 후, class를 추가하려고 했다.  
querySelectorAll로 받아온 아이템들은 배열이기 때문에 인덱스를 이용하여 하나씩 비교하는 방법을 썼으나 아직 해결을 하지 못하고 방법을 찾고 있다.
